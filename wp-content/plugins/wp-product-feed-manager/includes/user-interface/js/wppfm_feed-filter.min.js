/*!
 * wppfm_feed-filter.js v1.0
 * Part of the WP Product Feed Manager
 * Copyright 2016, Michel Jongbloed
 *
 */
"use strict";var $jq=jQuery.noConflict();var _feedHolder;function wppfm_makeFeedFilterWrapper(c,a){var g="All products from the selected Shop Categories will be included in the feed";var b="none";var h="none";if(a&&a.constructor===Array){var f=JSON.parse(a[0]["meta_value"]);var l=wppfm_countObjectItems(f);var d=1;b="initial";h="none";for(var k in f){var e=f[k][d].split("#");var j=l===d?true:false;g+='<span id="filter-accept-text"  style="display:'+b+';"> except the ones where:</span>';g+=wppfm_showEditFeedFilter(c,d,e,j);d++}}else{b="none";h="initial";g+='<span id="filter-accept-text"  style="display:'+b+';"> except the ones where:</span>'}g+='<span id="filter-edit-text" style="display:'+h+';"> (<a class="edit-feed-filter wppfm-btn wppfm-btn-small" href="javascript:void(0)" id="edit-feed-filters-'+c;g+='" onclick="wppfm_editFeedFilter('+c+')">edit</a>)</span>';$jq(".product-filter-condition-wrapper").html(g);$jq(".main-product-filter-wrapper").show()}function wppfm_showEditFeedFilter(c,b,a,d){var e='<div class="filter-wrapper" id="filter-wrapper-'+c+"-"+b+'">';e+=wppfm_filterPreCntrl(c,b,a[0]);e+=wppfm_filterSourceCntrl(c,b,a[1]);e+=wppfm_filterOptionsCntrl(c,b,a[2]);e+=wppfm_filterInputCntrl(c,b,1,a[3]);e+=wppfm_filterInputCntrl(c,b,2,a[3]);e+=' (<a class="feed-filter-remove wppfm-btn wppfm-btn-small" href="javascript:void(0)" id="filter-remove-';e+=b+'" onclick="wppfm_removeFilter('+c+", "+b+')">remove</a>)';e+=d?'<span id="add-feed-filter-link"> (<a class="feed-filter-add wppfm-btn wppfm-btn-small" href="javascript:void(0)" id="filter-add-'+b+'" onclick="wppfm_addFilter('+c+", "+b+')">add</a>)</span>':"";e+="</div>";return e}function wppfm_filterChanged(e,d){var c=e+"-"+d;var b=$jq("#filter-options-control-"+c).val();var a="";if(b==="4"||b==="5"||b==="14"){if(b==="14"){$jq("#filter-input-span-"+c+"-2").show();$jq("#filter-input-span-"+c+"-1").show();a=$jq("#filter-input-control-"+c+"-1").val()+"#0#"+$jq("#filter-input-control-"+c+"-2").val()}else{$jq("#filter-input-span-"+c+"-2").hide();$jq("#filter-input-span-"+c+"-1").hide()}}else{$jq("#filter-input-span-"+c+"-2").hide();$jq("#filter-input-span-"+c+"-1").show();a=$jq("#filter-input-control-"+c+"-1").val()}if(wppfm_feedFilterIsFilled(e,d)){var h=d>1?$jq("#filter-pre-control-"+c).val():"0";var g=$jq("#filter-source-control-"+c).val();var f=[h,g,b,a];_feedHolder.setFeedFilter(changeFeedFilterValue(_feedHolder.feedFilter,f,d))}}function wppfm_addFilter(b,a){if(wppfm_feedFilterIsFilled(b,a)||a===0){$jq("#add-feed-filter-link").remove();$jq(".product-filter-condition-wrapper").append(wppfm_showEditFeedFilter(b,a+1,"",true));$jq("#filter-edit-text").hide();$jq("#filter-accept-text").show()}else{alert("Please fill in the filter values before adding a new one")}}function wppfm_removeFilter(b,a){_feedHolder.removeFeedFilter(a);wppfm_makeFeedFilterWrapper(b,_feedHolder.feedFilter)}function wppfm_editFeedFilter(a){wppfm_addFilter(a,0)};